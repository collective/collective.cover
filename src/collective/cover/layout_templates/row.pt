<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      i18n:domain="collective.cover"
      tal:omit-tag="">
<body tal:omit-tag="">

    <tal:mode define="mode options/mode;">
        <div tal:define="section options/section | nothing;
                         data python:section.get('data', {}) if section else {};
                         viewClasses python: data.get('view-classes', '');
                         rownum python:section.get('rownum', '');"
            tal:condition="section"
            tal:attributes="class python:'%s %s' % (section.get('class', ''), (viewClasses if mode == 'view' else ''));
                            data-view-classes python: viewClasses;
                            data-layout-type python: data['layout-type'] if 'layout-type' in data else 'row'">
                    <a href="#" class="config-row-link"
                        tal:condition="python:mode == 'layout_edit'"
                        tal:attributes="href string:${context/absolute_url}/@@configure-row?rownum=${rownum};
                                        title string:Configure classes for row ${rownum}"
                        ><i class="config-icon"></i></a>

            <tal:children repeat="child python:section.get('children') or []">
                <div tal:replace="structure python:view.render_section(child, mode)" />
            </tal:children>

        </div>
    </tal:mode>

</body>
</html>

